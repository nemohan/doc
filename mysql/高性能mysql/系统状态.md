# 常用系统命令汇总

### 查询相关

#### 每个连接或线程的状态

命令: show full processlist

状态:

* sleep: 线程正在等待来自于客户端的新查询

* query: 线程正在执行查询或正在发送结果到客户端

* locked: 线程正在等待在server 级(server level)的 表锁(table lock)

* analyzing and statistics: 线程正在检查存储引擎的统计信息并优化查询

* copying to tmp table [on disk]: 线程正在处理查询并将结果拷贝到临时表。比如group by, filesort, union

* sorting result: 线程正在排序结果集

* sending data：表示的肯能多个状态, 线程可能在正在查询的阶段之间传递数据；生成结果集；返回结果到客户端

#### 当前查询的性能消耗(io)

show status like 'Last_query_cost'

mysql> SHOW STATUS LIKE 'Last_query_cost';
+-----------------+-------------+
| Variable_name | Value |
+-----------------+-------------+
| Last_query_cost | 1040.599000 |
+-----------------+-------------+
This result means that the optimizer estimated it would need to do about 1,040 random
data page reads to execute the query. It bases the estimate on statistics: the number of
pages per table or index, the cardinality (number of distinct values) of the indexes, the
length of the rows and keys, and the key distribution. The optimizer does not include
the effects of any type of caching in its estimates—it assumes every read will result in
a disk I/O operation.

