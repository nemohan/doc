# 主从复制

### 搭建主从复制遇到的问题

#### 主从设置的GTID-MODE变量不一致

在mysql界面设置GTID-MODE时，遇到只读错误

#### 修改GTID-MODE 遇到此变量只读错误

将GTID-MODE=ON写入my.cnf时，又出现如下错误

[ERROR] --gtid-mode=ON or UPGRADE_STEP_1 requires --enforce-gtid-consistency

还需要设置enforce_gtid_consistency = ON

~~~
[mysqld]
log_bin = mysql-bin
server_id = 512
relay_log = /var/lib/mysql/mysql-relay-bin
log_slave_updates=1
gtid-mode=ON
enforce_gtid_consistency=ON
binlog_format=row
~~~



#### binlog_format 格式不一致

主节点使用的是STATEMENT(语句)复制，slave用的是ROW(行)复制



### 相关命令

show slave status \G 查看slave节点状态.