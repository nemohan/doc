# 标记压缩算法

2019/11/13

### 标记压缩算法

算法描述:

重新移动活动对象，使得每个活动对象之间不存在空闲空间

~~~
压缩前:
|-----------|-----------|-----------|-----------|--------------
|used		|			|used		|			|used
|	     	|			|			|			|
|-----------|-----------|-----------|-----------|---------------

压缩后:
|-----------|-----------|-----------|-----------|--------------
|used		|used		|used		|			|
|	     	|			|			|			|
|-----------|-----------|-----------|-----------|---------------
~~~

今天跟同事聊起标记-压缩算法，只模糊记得是重新移动对象。具体的细节没什么印象了。假如让我实现该算法我该怎么做呢？所以尝试实现算法理清楚主要的逻辑应该会加深我对此的理解

1 假设我直接从roots开始，找到一个对象便进行移动到前面位置。遇到的第一个问题就是前面的对象可能会被覆盖。既然这种方法不行，那该怎么办呢？先标记找到的每个对象。

2  顺序扫描堆，移动遇到的每个被标记的对象。假设被移动的对象是A，A移动完成之后。移动被A引用的其他对象B时，不能更新A指向B的指针。

3