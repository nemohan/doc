# 增量回收算法

增量回收算法也是一种回收策略，实际依赖于标记-清扫、复制等算法。正如名字所暗示的每次回收一部分，以减少mutator的暂停时间。提到增量回收算法就不得不提到三色标记法(tri-color)。

三色标记法：

* 黑色对象 搜索完成的对象
* 灰色对象  搜索未完成的
* 白色对象  垃圾

步骤:

算法分成ROOT_SCAN、MARK、SWEEP三个阶段

* ROOT_SCAN阶段 将所有从根可以直接到达的对象放入放入队列，这部分对象是灰色。暂停执行，下次执行进入MARK阶段
* MARK阶段 每次将队列的部分对象标记，然后暂停执行。下次执行进入SWEEP阶段
* SWEEP阶段 清扫固定数目的对象，若清扫完成整个堆则跳转到第一步。否则在第二步继续标记

