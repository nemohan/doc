# chapter 5 indexing  for high performance



~~~mysql
create table star(
    id int primary key,
    name varchar(32),
    sex tinyint,
    birthdate timestamp,
    job varchar(32),
    address varchar(32),
    telephone varchar(32),
    key(name),
    key(birthdate, job)
)

~~~



#### 多列索引

包含多列的索引

#### 聚簇索引(cluster index)

聚簇索引的内容包含整行，而不是包含指向行(row)的指针。一个innodb表只有一个聚簇索引（primary key)

若没有明确指定primary key索引。innodb会生成一个隐式的primary key



因为聚簇索引的这种结构，所以根据索引查询某个值时，可以在索引包含的内容中找到。这样就避免了再根据行指针去读取磁盘的IO操作

#### 覆盖索引(covering index)

覆盖索引的内容包含索引列的内容。除此之外还包含primary key。这样就可以通过primary key找到对应的行



#### hash 索引

由于hash的kv特性，hash索引只支持精确查找，不支持范围查找

#### 非hash索引的一些使用限制

索引的使用遵循最做原则(left most)，即只能使用完整的索引或索引的某个前缀

1) 单列索引， 比如star表的name

* 匹配完整的列值

* 列值的某个前缀

2）多列索引

* 匹配索引包含的所有列, 如 where birthdate="2019-05-02" and job="software engineer"
* 多列的中的前面某几列
* 不可以跳过中间的某几列
* 匹配前面的某几列和某列的前缀 



#### 使用索引排序



#### 创建索引的一些技巧

* 使用顺序递增的数值作为索引，避免使用uuid或其他一些随机值作为索引
* 列太长无法作为索引时，尽量选择一个重复率比较低的前缀作为索引

#### 索引去重

重复索引、冗余索引、未使用的索引

#### 索引维护

